<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register - Cloud File</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #e0e7ff 0%, #fff 100%);
        }
        .card {
            border-radius: 1.2rem;
        }
        .form-label {
            font-weight: 500;
        }
        @media (max-width: 576px) {
            .card { min-width: 100% !important; padding: 1.5rem 0.5rem !important; }
        }
    </style>
</head>
<body class="bg-light d-flex align-items-center justify-content-center" style="min-height:100vh;">
    <div class="container py-4">
        <div class="row justify-content-center">
            <div class="col-12 col-sm-10 col-md-7 col-lg-5">
                <div class="d-flex justify-content-end mb-2">
                    <button id="themeToggle" class="btn btn-outline-secondary" title="Ganti tema"><i class="bi bi-moon"></i></button>
                </div>
                <div class="card shadow p-4">
                    <div class="text-center mb-3">
                        <span class="fw-bold fs-3 text-primary">Cloud File</span>
                    </div>
                    <div class="text-center mb-2">
                        <img src="/static/cloudfile-logo.svg" alt="Cloud File Logo" width="48" height="48" style="margin-bottom: 0.5rem;">
                    </div>
                    <h2 class="mb-4 text-center">Daftar Akun</h2>
                    {% with messages = get_flashed_messages() %}
                      {% if messages %}
                        <div class="alert alert-warning text-center">{{ messages[0] }}</div>
                      {% endif %}
                    {% endwith %}
                    <form method="post" novalidate>
                        <div class="mb-3">
                            <label for="name" class="form-label">Nama Pengguna</label>
                            <input type="text" class="form-control" id="name" name="name" value="{{ name or '' }}" required placeholder="Nama lengkap">
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" name="email" value="{{ email or '' }}" required placeholder="email@domain.com">
                        </div>
                        <div class="mb-3">
                            <label for="package" class="form-label">Pilih Paket Awal</label>
                            <select class="form-select" id="package" name="package" required>
                                <option value="free" {% if package == 'free' %}selected{% endif %}>Free (5GB, Gratis, fitur dasar)</option>
                                <option value="S" {% if package == 'S' %}selected{% endif %}>Paket S (50GB, <s>Rp9.900</s> Rp0/Gratis 30 hari untuk pengguna baru)</option>
                            </select>
                        </div>
                        <div class="row g-2">
                            <div class="col-12 col-md-6 mb-3">
                                <label for="password" class="form-label">Password</label>
                                <input type="password" class="form-control" id="password" name="password" required placeholder="Minimal 8 karakter">
                                <div id="password-strength" class="form-text text-danger">Minimal 8 karakter</div>
                            </div>
                            <div class="col-12 col-md-6 mb-3">
                                <label for="confirm_password" class="form-label">Konfirmasi Password</label>
                                <input type="password" class="form-control" id="confirm_password" name="confirm_password" required placeholder="Ulangi password">
                            </div>
                        </div>
                        <div class="row g-2">
                            <div class="col-12 col-md-6 mb-3">
                                <label for="q1" class="form-label">Pertanyaan Keamanan 1</label>
                                <select class="form-select" id="q1" name="q1" required>
                                    <option value="">-- Pilih Pertanyaan --</option>
                                    <option value="Siapa nama ibu kandung Anda?">Siapa nama ibu kandung Anda?</option>
                                    <option value="Di kota apa Anda lahir?">Di kota apa Anda lahir?</option>
                                    <option value="Apa nama sekolah SD Anda?">Apa nama sekolah SD Anda?</option>
                                    <option value="Apa makanan favorit Anda?">Apa makanan favorit Anda?</option>
                                    <option value="Apa nama hewan peliharaan pertama Anda?">Apa nama hewan peliharaan pertama Anda?</option>
                                </select>
                            </div>
                            <div class="col-12 col-md-6 mb-3">
                                <label for="a1" class="form-label">Jawaban 1</label>
                                <input type="text" class="form-control" id="a1" name="a1" required placeholder="Jawaban 1">
                            </div>
                        </div>
                        <div class="row g-2">
                            <div class="col-12 col-md-6 mb-3">
                                <label for="q2" class="form-label">Pertanyaan Keamanan 2</label>
                                <select class="form-select" id="q2" name="q2" required>
                                    <option value="">-- Pilih Pertanyaan --</option>
                                    <option value="Siapa nama ibu kandung Anda?">Siapa nama ibu kandung Anda?</option>
                                    <option value="Di kota apa Anda lahir?">Di kota apa Anda lahir?</option>
                                    <option value="Apa nama sekolah SD Anda?">Apa nama sekolah SD Anda?</option>
                                    <option value="Apa makanan favorit Anda?">Apa makanan favorit Anda?</option>
                                    <option value="Apa nama hewan peliharaan pertama Anda?">Apa nama hewan peliharaan pertama Anda?</option>
                                </select>
                            </div>
                            <div class="col-12 col-md-6 mb-3">
                                <label for="a2" class="form-label">Jawaban 2</label>
                                <input type="text" class="form-control" id="a2" name="a2" required placeholder="Jawaban 2">
                            </div>
                        </div>
                        <div class="row g-2">
                            <div class="col-12 col-md-6 mb-3">
                                <label for="q3" class="form-label">Pertanyaan Keamanan 3</label>
                                <select class="form-select" id="q3" name="q3" required>
                                    <option value="">-- Pilih Pertanyaan --</option>
                                    <option value="Siapa nama ibu kandung Anda?">Siapa nama ibu kandung Anda?</option>
                                    <option value="Di kota apa Anda lahir?">Di kota apa Anda lahir?</option>
                                    <option value="Apa nama sekolah SD Anda?">Apa nama sekolah SD Anda?</option>
                                    <option value="Apa makanan favorit Anda?">Apa makanan favorit Anda?</option>
                                    <option value="Apa nama hewan peliharaan pertama Anda?">Apa nama hewan peliharaan pertama Anda?</option>
                                </select>
                            </div>
                            <div class="col-12 col-md-6 mb-3">
                                <label for="a3" class="form-label">Jawaban 3</label>
                                <input type="text" class="form-control" id="a3" name="a3" required placeholder="Jawaban 3">
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 py-2 mt-2">Daftar</button>
                    </form>
                    <div class="mt-3 text-center">
                        <a href="{{ url_for('login') }}">Sudah punya akun? Login</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='theme.js') }}"></script>
    <script>
    const passwordInput = document.getElementById('password');
    const strengthText = document.getElementById('password-strength');
    passwordInput.addEventListener('input', function() {
        const val = passwordInput.value;
        let strength = '';
        let color = 'text-danger';
        if(val.length < 8) {
            strength = 'Password terlalu pendek';
            color = 'text-danger';
        } else if(/[A-Z]/.test(val) && /[0-9]/.test(val) && /[a-z]/.test(val) && /[^A-Za-z0-9]/.test(val)) {
            strength = 'Password kuat';
            color = 'text-success';
        } else if(/[A-Z]/.test(val) && /[0-9]/.test(val)) {
            strength = 'Password sedang';
            color = 'text-warning';
        } else {
            strength = 'Password lemah';
            color = 'text-danger';
        }
        strengthText.textContent = strength;
        strengthText.className = 'form-text ' + color;
    });
    </script>
</body>
</html>
